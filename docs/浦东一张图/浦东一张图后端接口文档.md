



## 浦东一张图后端接口文档

### 修订记录

| 版本号  | 时间       | 修订人 | 修订内容 |
|:-------|:-----------|:------|:--------|
| V1.0.0 | 2021-04-12 |       | 初始版本 |
|        |            |       |         |
|        |            |       |         |

#### 状态码列表

| 状态码 | 说明           |
|:------|:---------------|
| 0     | 返回正常        |
| 1     | 失败           |
| 2     | 参数错误        |
| 100   | 请求的token有误 |
| 110   | 请求的token为空 |
| 200   | 审批失败        |
| 999   | 服务器未知错误   |


### 请求头

| 字段名称      | 类型    | 必填 | 说明                                                                                                                                                                                                                                                                                                                                                         |
|:-------------|:-------|:----|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| token        | String | 是   | 请求Headers（token值：eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiIxMzM4MzA5ODczODc1NTU0IiwicmlkIjoiMjM1NjE1NzktN2Y2MC00NjNjLTliMzItZTRlNGI5ODc5YWMyIiwicHJvcHMiOm51bGwsImV4cCI6MTYyMDg5NzY1MiwianRpIjoiNmE5NzA0ZDEtODdkZS00YmJkLWJjNmMtZjgwM2JiOTZkZTlkIiwiaWF0IjoxNjE4MzA1NjUyLCJpc3MiOiJVc2VyU2VydmljZSJ9.zBucACuVvk1mmEiJQwJ_ks_0LiQnbU4ce8ChSZzIlPg） |
| Content-Type | String | 是   | application/json                                                                                                                                                                                                                                                                                                                                            |


### 刘彬

#### 应用中心接口

##### 行政单位应用列表

接口路径：

```http
http://IP:Port/zjmap/application/getApplicationAdminUnits
```

请求方式：GET

请求参数：无

请求示例：

```http
http://localhost:8094/zjmap/application/getApplicationAdminUnits
```

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data：

| 字段名称    | 类型    | 说明              |
|:-----------|:-------|:------------------|
| resultList | String | data中返回数据List |

resultList中对象

| 字段名称   | 类型    | 说明             |
|:----------|:-------|:----------------|
| adminUnit | String | 行政单位名称      |
| count     | String | 行政单位下应用数量 |

响应示例

```
{
  "code": 0,
  "data": {
    "resultList": [
      {
        "adminUnit": "建交委",
        "count": 0
      },
      {
        "adminUnit": "地工委",
        "count": 0
      },
      {
        "adminUnit": "城运中心",
        "count": 2
      },
      {
        "adminUnit": "生态环境局",
        "count": 0
      },
      {
        "adminUnit": "规划资源局",
        "count": 0
      }
    ]
  },
  "msg": "执行成功"
}
```

说明：无

##### 应用列表分页查询

接口路径：

```
http://IP:Port/zjmap/application/getAdminApplicationPage?pageNo=1&pageLength=10&sort=2
```

请求示例：

```
localhost:8094/zjmap/application/getAdminApplicationPage?pageNo=1&pageLength=10&sort=2
```

请求方式：GET

请求参数：

| 字段名称    | 类型    | 必填 | 说明        |
|:-----------|:-------|:----|:------------|
| adminUnit  | String | 是   | 行政单位名称 |
| sort       | String | 否   | 排序方式    |
| pageNo     | String | 是   | 页码        |
| pageLength | String | 是   | 页长        |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| total   | String | 总记录数 |
| pages   | String | 总页数   |
| records | Array  | 列表数据 |

list列表数据中对象

| 字段名称    | 类型    | 说明                  |
|:-----------|:-------|:---------------------|
| id         | String | 应用Id                |
| appName    | String | 应用名称              |
| count      | String | 接口访问次数           |
| createTime | String | 发布时间（yyyy-mm-dd） |
| createBy   | String | 发布者                |
| defaultImg | String | 默认图片地址           |
| url        | String | 访问地址              |
| desc       | String | 描述信息              |

响应示例：

```
{
  "code": 0,
  "data": {
    "total": 2,
    "pages": 1,
    "records": [
      {
        "id": 1,
        "appName": "浦东城运系统",
        "adminUnit": "城运中心",
        "defaultImg": null,
        "imgs": null,
        "company": "浦东新区规划资源局",
        "contact": "浦东新区规划资源局",
        "contactPhone": "12345678910",
        "url": "www.baidu.com",
        "appDesc": "浦东城运系统",
        "createTime": "2021-04-14",
        "createBy": "浦东新区规划资源局"
      },
      {
        "id": 2,
        "appName": "测试系统",
        "adminUnit": "城运中心",
        "defaultImg": null,
        "imgs": null,
        "company": null,
        "contact": null,
        "contactPhone": null,
        "url": null,
        "appDesc": "测试系统",
        "createTime": "2021-04-12",
        "createBy": null
      }
    ]
  },
  "msg": "执行成功"
}
```


##### 应用详情查询

接口路径：

```
http://IP:Port/zjmap/application/id
```

请求示例：

```
localhost:8094/zjmap/application/23
```

请求方式：GET

请求参数：

| 字段名称 | 类型    | 必填 | 说明   |
|:--------|:-------|:----|:-------|
| id      | String | 是   | 应用Id |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 状态码   |

data

| 字段名称         | 类型    | 说明                       |
|:----------------|:-------|:--------------------------|
| id              | String | 应用Id                     |
| appName         | String | 应用名称                   |
| imgs            | String | 图片地址列表（多个以","分隔） |
| company         | String | 应用单位                   |
| contact         | String | 联系人                     |
| contactPhone    | String | 联系电话                   |
| url             | String | 应用地址                   |
| appDesc         | String | 应用描述                   |
| applicationType | String | 应用中心类型                |
| applicationTypeName  |    String    | 应用中心类型名称  |
| appServices     | Array  | 应用调用服务列表             |

appServices集合中的对象

| 字段名称        | 类型    | 说明        |
|:---------------|:-------|:-----------|
| appServiceId   | String | 应用服务ID  |
| appServiceName | String | 应用服务名称 |
| appServiceDesc | String | 服务描述    |
| serviceType    | String | 业务类型（1：数据服务 2：功能数据）       |


响应示例：

```
{
  "code": 0,
  "data": {
    "id": 23,
    "appName": "zxczcz",
    "imgs": null,
    "company": "zxczc",
    "contact": "zczc",
    "contactPhone": "zczc",
    "url": "",
    "appDesc": null,
    "applicationType": 1,
    "applicationTypeName": "居村",
    "appServices": [
      {
        "appServiceId": 56,
        "appServiceName": "普通地图服务-12",
        "appServiceDesc": "做地图的展示",
        "serviceType": 1
      },
      {
        "appServiceId": 57,
        "appServiceName": "普通地图服务-13",
        "appServiceDesc": "做地图的展示",
        "serviceType": 1
      }
    ]
  },
  "msg": "执行成功"
}
```



##### 服务历史请求量统计列表查询

接口路径：

```
http://IP:Port/zjmap/application/getApplicationServiceHistory?id=1
```

请求示例：

```
localhost:8094/zjmap/application/getApplicationServiceHistory?id=1
```

请求参数：

| 字段名称 | 类型    | 必填 | 说明   |
|:--------|:-------|:----|:-------|
| id      | String | 是   | 应用Id |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data

| 字段名称    | 类型   | 说明 |
|:-----------|:------|:----|
| resultList | Array |     |

resultList中对象

| 字段名称 | 类型    | 说明                                   |
|:--------|:-------|:---------------------------------------|
| day     | String | 日期                                   |
| count   | String | 总数                                   |
| bizType | String | 业务类型（100：功能服务 200：基础空间数据） |

响应示例：

```
{
  "code": 0,
  "data": {
    "resultList": [
      {
        "day": "03-14",
        "count": 1,
        "bizType": 100
      },
      {
        "day": "03-14",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-15",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-15",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-16",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-16",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-17",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-17",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-18",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-18",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-19",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-19",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-20",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-20",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-21",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-21",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-22",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-22",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-23",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-23",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-24",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-24",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-25",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-25",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-26",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-26",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-27",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-27",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-28",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-28",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-29",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-29",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-30",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-30",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "03-31",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "03-31",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-01",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-01",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-02",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-02",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-03",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-03",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-04",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-04",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-05",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-05",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-06",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-06",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-07",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-07",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-08",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-08",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-09",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-09",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-10",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-10",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-11",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-11",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-12",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-12",
        "count": 0,
        "bizType": 200
      },
      {
        "day": "04-13",
        "count": 1,
        "bizType": 100
      },
      {
        "day": "04-13",
        "count": 100,
        "bizType": 200
      },
      {
        "day": "04-14",
        "count": 0,
        "bizType": 100
      },
      {
        "day": "04-14",
        "count": 0,
        "bizType": 200
      }
    ]
  },
  "msg": "执行成功"
}
```

##### 应用服务列表查询

接口路径：

```
http://IP:Port/zjmap/application/search:serviceList
```

请求示例：

```
localhost:8094/zjmap/application/search:serviceList
```

请求参数：
无

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data

| 字段名称    | 类型   | 说明 |
|:-----------|:------|:----|
| resultList | Array |     |

resultList中对象

| 字段名称 | 类型    | 说明                                   |
|:--------|:-------|:---------------------------------------|
| appServiceId  | String | 服务id                                   |
| appServiceName   | String | 服务名称                                   |
| serviceType | String | 业务类型（1：数据服务 2：功能数据） |

响应示例：

```
{
  "code": 0,
  "data": {
    "resultList": [
      {
        "appServiceId": 36,
        "appServiceName": "普通地图服务-04",
        "serviceType": 1
      },
      {
        "appServiceId": 58,
        "appServiceName": "测试服务",
        "serviceType": 1
      },
      {
        "appServiceId": 60,
        "appServiceName": "ggd",
        "serviceType": 1
      },
      {
        "appServiceId": 50,
        "appServiceName": "普通地图服务-09",
        "serviceType": 1
      },
      {
        "appServiceId": 56,
        "appServiceName": "普通地图服务-12",
        "serviceType": 1
      },
      {
        "appServiceId": 57,
        "appServiceName": "普通地图服务-13",
        "serviceType": 1
      },
      {
        "appServiceId": 61,
        "appServiceName": "普通地图服务-14",
        "serviceType": 1
      },
      {
        "appServiceId": 66,
        "appServiceName": "testke",
        "serviceType": 1
      },
      {
        "appServiceId": 54,
        "appServiceName": "普通地图服务-11",
        "serviceType": 1
      },
      {
        "appServiceId": 64,
        "appServiceName": "test嘎嘎嘎",
        "serviceType": 1
      },
      {
        "appServiceId": 72,
        "appServiceName": "普通地图服务-15",
        "serviceType": 1
      },
      {
        "appServiceId": 74,
        "appServiceName": "gg",
        "serviceType": 1
      },
      {
        "appServiceId": 76,
        "appServiceName": "mmp",
        "serviceType": 1
      },
      {
        "appServiceId": 77,
        "appServiceName": "www",
        "serviceType": 1
      },
      {
        "appServiceId": 78,
        "appServiceName": "普通地图服务-16",
        "serviceType": 1
      },
      {
        "appServiceId": 80,
        "appServiceName": "aaa",
        "serviceType": 1
      },
      {
        "appServiceId": 3,
        "appServiceName": "103",
        "serviceType": 2
      },
      {
        "appServiceId": 10,
        "appServiceName": "功能服务11105",
        "serviceType": 2
      },
      {
        "appServiceId": 11,
        "appServiceName": "功能服务22206",
        "serviceType": 2
      },
      {
        "appServiceId": 1,
        "appServiceName": "基础矢量功能服务",
        "serviceType": 2
      },
      {
        "appServiceId": 2,
        "appServiceName": "基础影像功能服务器",
        "serviceType": 2
      },
      {
        "appServiceId": 6,
        "appServiceName": "101",
        "serviceType": 2
      },
      {
        "appServiceId": 9,
        "appServiceName": "102",
        "serviceType": 2
      },
      {
        "appServiceId": 4,
        "appServiceName": "功能服务11101",
        "serviceType": 2
      },
      {
        "appServiceId": 5,
        "appServiceName": "功能服务22202",
        "serviceType": 2
      },
      {
        "appServiceId": 7,
        "appServiceName": "功能服务11103",
        "serviceType": 2
      },
      {
        "appServiceId": 8,
        "appServiceName": "功能服务22204",
        "serviceType": 2
      },
      {
        "appServiceId": 12,
        "appServiceName": "京东基础服务",
        "serviceType": 2
      }
    ]
  },
  "msg": "执行成功"
}
```

##### 应用新增

接口路径：

```
http://IP:Port/zjmap/application/app
```

请求示例：

```
localhost:8094/zjmap/application/app
```
请求body
```
{    
    "imgList": [
        "/pdmap/img/8.jpg"
    ],
    "appName": "应用测试",
    "applicationType": "3",
    "company": "TEST",
    "contact": "赵恒",
    "contactPhone": "12345678910",
    "url": "www.baidu.com",
    "appDesc": "应用新增测试", 
    "appServices": [
        {
            "appServiceId": 34,
            "serviceType": 1
        },
        {
            "appServiceId": 12,
            "serviceType": 2
        }
    ]
}
```

请求方式：POST

请求参数

| 字段名称         | 类型           | 必填 | 说明           |
|:----------------|:--------------|:----|:---------------|
| imgList         | Array::String | 否   | 图片地址数组    |
| appName         | String        | 是   | 应用名称        |
| applicationType | String        | 是   | 行政单位名称类型 |
| company         | String        | 是   | 应用单位        |
| contact         | String        | 是   | 联系人         |
| contactPhone    | String        | 是   | 联系人电话      |
| url             | String        | 否   | 访问地址        |
| appDesc         | String        | 否   | 描述信息        |
| appServices      | Array::Object | 否   | 服务列表        |

appService中对象

| 字段名称     | 类型     | 必填 | 说明    |
|:------------|:--------|:----|:--------|
| appServiceId| Integer | 是   | 服务Id  |
| serviceType | Integer | 是   | 服务类型 |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Integer | 应用Id |

响应示例：
```
{
  "code": 0,
  "data": 15,
  "msg": "执行成功"
}
```

##### 应用编辑

接口路径：

```
http://IP:Port/zjmap/application/app
```

请求示例：

```
localhost:8094/zjmap/application/app
```
请求body
```
{    
    “id”: "15",
    "imgList": [
        "/pdmap/img/8.jpg"
    ],
    "appName": "应用测试",
    "applicationType": "3",
    "company": "TEST",
    "contact": "赵恒",
    "contactPhone": "12345678910",
    "url": "www.baidu.com",
    "appDesc": "应用新增测试", 
    "appServices": [
        {
            "appServiceId": 34,
            "serviceType": 1
        },
        {
            "appServiceId": 12,
            "serviceType": 2
        }
    ]
}
```

请求方式：PUT

请求参数

| 字段名称         | 类型           | 必填 | 说明           |
|:----------------|:--------------|:----|:---------------|
| id              | Integer       | 否   | 应用Id  |
| imgList         | Array::String | 否   | 图片地址数组    |
| appName         | String        | 是   | 应用名称        |
| applicationType | String        | 是   | 行政单位名称类型 |
| company         | String        | 是   | 应用单位        |
| contact         | String        | 是   | 联系人         |
| contactPhone    | String        | 是   | 联系人电话      |
| url             | String        | 否   | 访问地址        |
| appDesc         | String        | 否   | 描述信息        |
| appServices      | Array::Object | 否   | 服务列表        |

appService中对象

| 字段名称     | 类型     | 必填 | 说明    |
|:------------|:--------|:----|:--------|
| appServiceId| Integer | 是   | 服务Id  |
| serviceType | Integer | 是   | 服务类型 |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Integer | 应用Id |

响应示例：
```
{
  "code": 0,
  "data": 15,
  "msg": "执行成功"
}
```
##### 应用删除

接口路径：

```
http://IP:Port/zjmap/application/app
```

请求示例：

```
localhost:8094/zjmap/application/app
```
请求body
```
{    
    [17]
}
```

请求方式：DELETE

请求参数

| 字段名称         | 类型           | 必填 | 说明           |
|:----------------|:--------------|:----|:---------------|
| id              | Arrays::Integer       | 否   | 应用Id数组         |


响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Integer | 应用Id |

响应示例：
```
{
  "code": 0,
  "data": true,
  "msg": "执行成功"
}
```
#### 个人中心接口

##### 我的资源查询

接口路径：

```
http://IP:Port/zjmap/myCenter/search:myResources?user_id=1338309873875554
```

请求示例：

```
localhost:8094/zjmap/myCenter/search:myResources?user_id=1338309873875554
```

请求方式：GET

请求参数

| 字段名称 | 类型    | 必填 | 说明   |
|:--------|:-------|:----|:-------|
| user_id | String | 是   | 用户Id |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data

| 字段名称         | 类型    | 说明      |
|:----------------|:-------|:----------|
| applyResource   | Object | 申请的资源 |
| releaseResource | Object | 发布的资源 |

applyResource：申请的资源

| 字段名称         | 类型    | 说明        |
|:----------------|:-------|:-----------|
| usedResources   | String | 已使用服务   |
| rejectResources | String | 已驳回的服务 |
| verifyResources | String | 待审核的服务 |

releaseResource：发布的资源

| 字段名称           | 类型    | 说明         |
|:------------------|:-------|:-------------|
| registerResources | String | 已注册服务    |
| applyTimes        | String | 委办申请使用数 |
| dayAvgRequests    | String | 日均服务请求量 |

响应示例：

```
{
  "code": 0,
  "data": {
    "applyResource": {
      "usedResources": 0,
      "rejectResources": 0,
      "verifyResources": 0
    },
    "releaseResource": {
      "registerResources": 1,
      "applyTimes": 0,
      "dayAvgRequests": 160.0
    }
  },
  "msg": "执行成功"
}
```

##### 我的关注分页列表查询

接口路径：

```
http://IP:Port/zjmap/myCenter/list?user_id=1338309873875554&current_page=1&page_size=10
```

请求示例：

```
localhost:8094/zjmap/myCenter/list?user_id=1338309873875554&current_page=1&page_size=10
```

请求方式：GET

请求参数

| 字段名称      | 类型    | 必填 | 说明      |
|:-------------|:-------|:----|:----------|
| user_id      | String | 是   | 用户Id    |
| current_page | String | 是   | 页码      |
| page_size    | String | 是   | 每页记录数 |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data对象字段

| 字段名称 | 类型   | 说明    |
|:--------|:------|:--------|
| records | Array | 列表数据 |

records中对象

| 字段名称     | 类型    | 说明                                      |
|:------------|:-------|:------------------------------------------|
| resourceId  | String | 资源Id                                     |
| img         | String | 图片地址                                   |
| name        | String | 资源名称                                   |
| theme       | String | 主题分类                                   |
| bizType     | String | 资源类型（1 数据服务 2 功能服务）             |
| company     | String | 发布单位                                   |
| shareType   | String | 共享属性                                   |
| status      | String | 申请状态：0 未申请 1 已申请 2 已驳回  3 已通过 4 已过期|
| concernTime | String | 关注时间（yyyy-MM-dd）                      |

响应示例

```
{
  "code": 0,
  "data": {
    "records": [
      {
        "resourceId": 1,
        "img": null,
        "name": null,
        "theme": null,
        "bizType": 1,
        "company": null,
        "shareType": null,
        "status": 0,
        "concernTime": "2021-05-19"
      },
      {
        "resourceId": 3,
        "img": "1",
        "name": "1",
        "theme": "基础能力服务",
        "bizType": 2,
        "company": null,
        "shareType": 1,
        "status": 1,
        "concernTime": null
      }
    ]
  },
  "msg": "执行成功"
}
```
##### 我的信息列表查询

接口路径：

```
http://IP:Port/zjmap/myCenter/search:myInformation?type="1"
```

请求示例：

```
localhost:8094/zjmap/myCenter/search:myInformation?type="1"
```

请求方式：GET

请求参数

| 字段名称      | 类型    | 必填 | 说明      |
|:-------------|:-------|:----|:----------|
| type      | String | 否   | 请求类型：1 我的待审核 2 我已审核的服务 3 我申请的服务 4 我的通知 全部不传 |

响应

成功响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data对象字段

| 字段名称 | 类型   | 说明    |
|:--------|:------|:--------|
| resultList | Array | 列表数据 |

resultList中对象

| 字段名称     | 类型    | 说明                                      |
|:------------|:-------|:------------------------------------------|
| informationType  | String | 信息类型                              |
| content         | String | 消息内容                               |
| time        | String | 时间                                   |

响应示例

```
{
  "code": 0,
  "data": {
    "resultList": [
      {
        "informationType": "我的待审核",
        "content": "2021-05-20 您发起普通地图服务-05 资源的申请",
        "time": "2021-05-20"
      },
      {
        "informationType": "我申请的服务",
        "content": "2021-04-21 您发起测试2 资源的申请",
        "time": "2021-04-21"
      }
    ]
  },
  "msg": "执行成功"
}
```

#### 首页接口

##### 查询应用服务数量

接口路径

```
http://IP:Port/zjmap/index/appServiceCount?type="1"
```

请求示例：

```
localhost:8094/zjmap/index/appServiceCount?type="1"
```

请求方式：GET

请求参数：

响应：

成功响应参数：

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

data对象字段：

| 字段名称           | 类型    | 说明         |
| ------------------ | ------- | ------------ |
| funcServVisitCount | Integer | 功能服务访问 |
| dataServVisitCount | Integer | 数据接口访问 |
| funcServCount      | Integer | 功能服务个数 |
| dataServCount      | Integer | 数据服务个数 |
| appCount           | Integer | 支撑应用个数 |
| serviceUnitCount   | Integer | 服务单位个数 |

响应示例：

```

```

##### 分类列表查询

接口路径

```
http://IP:Port/zjmap/index/indexType?type="1"
```

请求示例：

```
localhost:8094/zjmap/index/indexType?type="1"
```

请求方式：GET

请求参数

| 字段名称 | 类型   | 必填 | 说明                            |
| :------- | :----- | :--- | :------------------------------ |
| type     | String | 是   | 请求类型：1 数据分类 2 部门分类 |

响应：

成功响应参数：

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

data对象字段：

| 字段名称   | 类型  | 说明     |
| :--------- | :---- | :------- |
| resultList | Array | 列表数据 |

resultList中对象：

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| name     | String | 分类名称 |
| id       | String | 分类Id   |
| value    | String | 分类值   |

响应示例：

```

```

##### 最新服务

接口路径

```
http://IP:Port/zjmap/index/latestServiceList
```

请求示例：

```
localhost:8094/zjmap/index/latestServiceList
```

请求方式：GET

请求参数：无

响应：

成功响应参数：

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

data对象字段：

| 字段名称   | 类型  | 说明     |
| :--------- | :---- | :------- |
| resultList | Array | 列表数据 |

resultList中对象：

| 字段名称    | 类型   | 说明         |
| :---------- | :----- | :----------- |
| id          | String | 服务Id       |
| serviceName | String | 服务名称     |
| img         | String | 服务图片地址 |
| company     | String | 发布部门     |
| serviceDesc | String | 服务概述     |
| time        | String | 服务更新时间 |

响应示例：

```

```

##### 最近热门服务

接口路径

```
http://IP:Port/zjmap/index/latestHotServiceList
```

请求示例：

```
localhost:8094/zjmap/index/latestHotServiceList
```

请求方式：GET

请求参数：无

响应：

成功响应参数：

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

data对象字段：

| 字段名称   | 类型  | 说明     |
| :--------- | :---- | :------- |
| resultList | Array | 列表数据 |

resultList中对象：

| 字段名称     | 类型   | 说明          |
| :----------- | :----- | :------------ |
| id           | String | 服务Id        |
| serviceName  | String | 服务名称      |
| img          | String | 服务图片地址  |
| company      | String | 发布部门      |
| serviceDesc  | String | 服务概述      |
| requestTimes | String | 近7天请求总数 |

响应示例：

```

```

##### 服务调用总量top5

接口路径

```
http://IP:Port/zjmap/index/serviceCallTotalTop5
```

请求示例：

```
localhost:8094/zjmap/index/serviceCallTotalTop5
```

请求方式：GET

请求参数：无

响应：

成功响应参数：

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

data对象字段：

| 字段名称   | 类型  | 说明     |
| :--------- | :---- | :------- |
| resultList | Array | 列表数据 |

resultList中对象：

| 字段名称     | 类型   | 说明         |
| :----------- | :----- | :----------- |
| id           | String | 服务Id       |
| serviceName  | String | 服务名称     |
| img          | String | 服务图片地址 |
| company      | String | 发布部门     |
| serviceDesc  | String | 服务概述     |
| requestTimes | String | 历史总请求数 |

响应示例：

```

```



### 李儒大

#### 获取行政区域列表

接口路径：

```
http://IP:Port/zjmap/api/getAreas
```

请求示例：

```
localhost:8094/zjmap/api/getAreas
```

请求参数：

| 字段名称      | 类型    | 必填 | 说明               |
|:-------------|:-------|:----|:-------------------|
| keywords     | String | 是   | 关键字或者行政区code |
| sub_district | String | 否   | 返回下面几级行政区   |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": [
        {
            "subAdminAreas": [
                {
                    "code": "310115139",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.79518,
                            31.119625
                        ],
                        "type": "Point"
                    },
                    "name": "祝桥镇"
                },
                {
                    "code": "310115005",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.51331,
                            31.235003
                        ],
                        "type": "Point"
                    },
                    "name": "陆家嘴街道"
                },
                {
                    "code": "310115010",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.513751,
                            31.191922
                        ],
                        "type": "Point"
                    },
                    "name": "南码头路街道"
                },
                {
                    "code": "310115009",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.480018,
                            31.176279
                        ],
                        "type": "Point"
                    },
                    "name": "上钢新村街道"
                },
                {
                    "code": "310115016",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.560894,
                            31.213063
                        ],
                        "type": "Point"
                    },
                    "name": "花木街道"
                },
                {
                    "code": "310115014",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.595784,
                            31.268753
                        ],
                        "type": "Point"
                    },
                    "name": "浦兴路街道"
                },
                {
                    "code": "310115011",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.577328,
                            31.271206
                        ],
                        "type": "Point"
                    },
                    "name": "沪东新村街道"
                },
                {
                    "code": "310115104",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.556487,
                            31.358492
                        ],
                        "type": "Point"
                    },
                    "name": "高桥镇"
                },
                {
                    "code": "310115015",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.511102,
                            31.145094
                        ],
                        "type": "Point"
                    },
                    "name": "东明路街道"
                },
                {
                    "code": "310115117",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.676021,
                            31.282124
                        ],
                        "type": "Point"
                    },
                    "name": "曹路镇"
                },
                {
                    "code": "310115141",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.694392,
                            31.037597
                        ],
                        "type": "Point"
                    },
                    "name": "宣桥镇"
                },
                {
                    "code": "310115133",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.645344,
                            31.040361
                        ],
                        "type": "Point"
                    },
                    "name": "新场镇"
                },
                {
                    "code": "310115134",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.755655,
                            30.975599
                        ],
                        "type": "Point"
                    },
                    "name": "大团镇"
                },
                {
                    "code": "310115136",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.613563,
                            31.136969
                        ],
                        "type": "Point"
                    },
                    "name": "康桥镇"
                },
                {
                    "code": "310115137",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.590866,
                            31.041374
                        ],
                        "type": "Point"
                    },
                    "name": "航头镇"
                },
                {
                    "code": "310115132",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.618997,
                            31.109308
                        ],
                        "type": "Point"
                    },
                    "name": "周浦镇"
                },
                {
                    "code": "310115123",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.642286,
                            31.322676
                        ],
                        "type": "Point"
                    },
                    "name": "高东镇"
                },
                {
                    "code": "310115130",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.47693,
                            31.140514
                        ],
                        "type": "Point"
                    },
                    "name": "三林镇"
                },
                {
                    "code": "310115121",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.580454,
                            31.306731
                        ],
                        "type": "Point"
                    },
                    "name": "高行镇"
                },
                {
                    "code": "310115145",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.940967,
                            30.922622
                        ],
                        "type": "Point"
                    },
                    "name": "南汇新城镇"
                },
                {
                    "code": "310115144",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.842444,
                            31.035399
                        ],
                        "type": "Point"
                    },
                    "name": "老港镇"
                },
                {
                    "code": "310115103",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.694253,
                            31.14691
                        ],
                        "type": "Point"
                    },
                    "name": "川沙新镇"
                },
                {
                    "code": "310115008",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.519875,
                            31.209259
                        ],
                        "type": "Point"
                    },
                    "name": "塘桥街道"
                },
                {
                    "code": "310115143",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.816136,
                            30.963854
                        ],
                        "type": "Point"
                    },
                    "name": "万祥镇"
                },
                {
                    "code": "310115131",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.76181,
                            31.028929
                        ],
                        "type": "Point"
                    },
                    "name": "惠南镇"
                },
                {
                    "code": "310115007",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.505858,
                            31.182235
                        ],
                        "type": "Point"
                    },
                    "name": "周家渡街道"
                },
                {
                    "code": "310115114",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.657503,
                            31.226098
                        ],
                        "type": "Point"
                    },
                    "name": "唐镇"
                },
                {
                    "code": "310115142",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.875456,
                            30.939013
                        ],
                        "type": "Point"
                    },
                    "name": "书院镇"
                },
                {
                    "code": "310115120",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.617177,
                            31.250792
                        ],
                        "type": "Point"
                    },
                    "name": "金桥镇"
                },
                {
                    "code": "310115125",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.626462,
                            31.190936
                        ],
                        "type": "Point"
                    },
                    "name": "张江镇"
                },
                {
                    "code": "310115110",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.725638,
                            31.234385
                        ],
                        "type": "Point"
                    },
                    "name": "合庆镇"
                },
                {
                    "code": "310115105",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.557084,
                            31.176808
                        ],
                        "type": "Point"
                    },
                    "name": "北蔡镇"
                },
                {
                    "code": "310115140",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.829957,
                            30.908855
                        ],
                        "type": "Point"
                    },
                    "name": "泥城镇"
                },
                {
                    "code": "310115012",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.565852,
                            31.254778
                        ],
                        "type": "Point"
                    },
                    "name": "金杨新村街道"
                },
                {
                    "code": "310115013",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.547561,
                            31.238864
                        ],
                        "type": "Point"
                    },
                    "name": "洋泾街道"
                },
                {
                    "code": "310115004",
                    "level": 4,
                    "center": {
                        "coordinates": [
                            121.522607,
                            31.223888
                        ],
                        "type": "Point"
                    },
                    "name": "潍坊新村街道"
                }
            ],
            "code": "310115",
            "level": 3,
            "center": {
                "coordinates": [
                    121.567706,
                    31.245944
                ],
                "type": "Point"
            },
            "name": "浦东新区"
        }
    ]
}
```


#### Place搜索V2

接口路径：

```
http://IP:Port/zjmap/api/search2
```

请求示例：

```
localhost:8094/zjmap/api/search2
```

请求参数：

| 字段名称 | 类型    | 必填 | 说明      |
|:--------|:-------|:----|:----------|
| keyword | String | 是   | 查询关键字 |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": [
        {
            "area": "上海市浦东新区",
            "center": null,
            "name": "炬芯研发大楼",
            "geometry": {
                "coordinates": [
                    [
                        [
                            121.603828,
                            31.179941
                        ],
                        [
                            121.605261,
                            31.180189
                        ],
                        [
                            121.605489,
                            31.17945
                        ],
                        [
                            121.605411,
                            31.179326
                        ],
                        [
                            121.603979,
                            31.179069
                        ],
                        [
                            121.603828,
                            31.179941
                        ]
                    ]
                ],
                "type": "Polygon"
            },
            "type": "Polygon"
        },
        {
            "area": "东莞市东莞市",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    113.666342,
                    22.897763
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "南通市海安市",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    120.505404,
                    32.510348
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "嘉兴市平湖市",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    121.061739,
                    30.611309
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "廊坊市大厂回族自治县",
            "center": null,
            "name": "研发大楼A",
            "geometry": {
                "coordinates": [
                    116.890275,
                    39.918575
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "西安市雁塔区",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    108.892753,
                    34.232787
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "厦门市海沧区",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    118.013665,
                    24.52312
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "十堰市房县",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    110.766828,
                    32.05254
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "嘉兴市秀洲区",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    120.63459,
                    30.787644
                ],
                "type": "Point"
            },
            "type": "Point"
        },
        {
            "area": "无锡市锡山区",
            "center": null,
            "name": "研发大楼",
            "geometry": {
                "coordinates": [
                    120.549237,
                    31.692029
                ],
                "type": "Point"
            },
            "type": "Point"
        }
    ]
}
```


#### 创建工单

接口路径：

```
http://IP:Port/zjmap/work-order/createWorkOrder
```

请求示例：

```
localhost:8094/zjmap/work-order/createWorkOrder
```

请求参数：                                                                                            |
| 字段名称 | 类型    | 必填 | 说明                                                         |
| -------- | ------- | ---- | ------------------------------------------------------------ |
| name     | String  | 是   | 工单名称                                                     |
| bizType  | String  | 是   | 工单类型 数据服务注册100 申请时数据服务101 功能服务注册 200 申请功能服务201 |
| content  | String  | 否   | 工单内容 json格式数据                                        |
| bizId    | Integer | 是   | 业务ID                                                       |
| remark   | String  | 是   | 备注                                                         |

工单内容说明 申请时数据服务时

| 名称           | 描述              |
| -------------- | ----------------- |
| 共享方式       | shareType         |
| 使用期限       | usePeriod         |
| 申请原因       | applyReason       |
| 申请应用       | applyApplication  |
| ip地址（主）   | masterIP          |
| ip地址（备用） | slaveIP           |
| 每天访问次数   | visitsPerDay      |
| 并发量         | concurrency       |
| 申请人姓名     | applyName         |
| 手机号         | applyPhone        |
| 政务邮箱       | governmentMailbox |
| 所属部门       | unit              |



响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

#### 获取一张图菜单

接口路径：

```
http://IP:Port/zjmap/api/getMapList
```

请求示例：

```
localhost:8094/zjmap/api/getMapList
```

请求参数：

| 字段名称        | 类型    | 必填 | 说明                               |
|:---------------|:-------|:----|:-----------------------------------|
| categoriesType | String | 是   | 主题分类："default" 部门分类 "admin" |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应数据格式

```
{
    "code": 0,
    "msg": "success",
    "data": [
        {
            "id": "020000",
            "label": "民生兴趣点",
            "name": null,
            "minZoom": null,
            "maxZoom": null,
            "url": null,
            "styles": {},
            "center": null,
            "bounds": null,
            "children": [
                {
                    "id": "5aed96a5-dbeb-4c78-98f3-e406bec454ae",
                    "label": "餐饮",
                    "name": "foods",
                    "minZoom": "8",
                    "maxZoom": "16",
                    "url": null,
                    "styles": {},
                    "center": [
                        121.724162,
                        31.117554
                    ],
                    "bounds": [
                        121.47637,
                        30.854941,
                        121.971953,
                        31.380167
                    ],
                    "children": [
                        {
                            "id": "3c6c5468-6668-4fcc-8cea-64a700fc7b27",
                            "label": "美食",
                            "name": "food",
                            "minZoom": "8",
                            "maxZoom": "16",
                            "url": "http://172.3.0.149:8082/maps/tilestream/v1/layers/pudong-food-20210427/tiles/{z}/{x}/{y}",
                            "styles": {
                                "food": {
                                    "circle-color": "#0E9700",
                                    "circle-opacity": 1
                                }
                            },
                            "center": [
                                121.724162,
                                31.117554
                            ],
                            "bounds": [
                                121.47637,
                                30.854941,
                                121.971953,
                                31.380167
                            ]
                        }
                    ]
                },
                {
                    "id": "3bc34151-6fa7-47d1-bcf0-f4a0e19e0af2",
                    "label": "商业",
                    "name": "commerce",
                    "minZoom": "8",
                    "maxZoom": "16",
                    "url": null,
                    "styles": {},
                    "center": [
                        121.724162,
                        31.117554
                    ],
                    "bounds": [
                        121.47637,
                        30.854941,
                        121.971953,
                        31.380167
                    ],
                    "children": [
                        {
                            "id": "adb5e2f6-6a9b-4066-a28b-f4656bddf826",
                            "label": "商场",
                            "name": "mall",
                            "minZoom": "8",
                            "maxZoom": "16",
                            "url": "http://172.3.0.149:8082/maps/tilestream/v1/layers/pudong-commercial-20210427/tiles/{z}/{x}/{y}",
                            "styles": {
                                "mall": {
                                    "circle-color": "#0E9700",
                                    "circle-opacity": 1
                                }
                            },
                            "center": [
                                121.724162,
                                31.117554
                            ],
                            "bounds": [
                                121.47637,
                                30.854941,
                                121.971953,
                                31.380167
                            ]
                        },
                        {
                            "id": "3526e7f2-f085-4147-898e-86b1605c26d2",
                            "label": "便利店",
                            "name": "grocery",
                            "minZoom": "8",
                            "maxZoom": "16",
                            "url": "http://172.3.0.149:8082/maps/tilestream/v1/layers/pudong-commercial-20210427/tiles/{z}/{x}/{y}",
                            "styles": {
                                "grocery": {
                                    "circle-color": "#0E9700",
                                    "circle-opacity": 1
                                }
                            },
                            "center": [
                                121.724162,
                                31.117554
                            ],
                            "bounds": [
                                121.47637,
                                30.854941,
                                121.971953,
                                31.380167
                            ]
                        },
                        {
                            "id": "4f7a0c75-1c43-475e-963d-81a5e87e5393",
                            "label": "超市",
                            "name": "market",
                            "minZoom": "8",
                            "maxZoom": "16",
                            "url": "http://172.3.0.149:8082/maps/tilestream/v1/layers/pudong-commercial-20210427/tiles/{z}/{x}/{y}",
                            "styles": {
                                "market": {
                                    "circle-color": "#0E9700",
                                    "circle-opacity": 1
                                }
                            },
                            "center": [
                                121.724162,
                                31.117554
                            ],
                            "bounds": [
                                121.47637,
                                30.854941,
                                121.971953,
                                31.380167
                            ]
                        },
                        {
                            "id": "592a8996-dfa4-4649-bcbe-b8d524611441",
                            "label": "街边店",
                            "name": "shop",
                            "minZoom": "8",
                            "maxZoom": "16",
                            "url": "http://172.3.0.149:8082/maps/tilestream/v1/layers/pudong-commercial-20210427/tiles/{z}/{x}/{y}",
                            "styles": {
                                "shop": {
                                    "circle-color": "#0E9700",
                                    "circle-opacity": 1
                                }
                            },
                            "center": [
                                121.724162,
                                31.117554
                            ],
                            "bounds": [
                                121.47637,
                                30.854941,
                                121.971953,
                                31.380167
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}
```

#### 获取类别信息

接口路径：

```
http://IP:Port/zjmap/category/getList
```

请求示例：

```
localhost:8094/zjmap/zjmap/category/getList
```

请求参数：

无

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

示例数据

```
{
    "code": 0,
    "msg": "success",
    "data": {
        "公共设施": [
            "111500",
            "111400",
            "110300",
            "110200"
        ],
        "教育配套": [
            "80100"
        ],
        "医疗配套": [
            "90400",
            "90203",
            "90201",
            "90212",
            "90213",
            "90500",
            "90202",
            "90204",
            "90205",
            "90206",
            "90207",
            "90208",
            "90209",
            "90210",
            "90211",
            "90300",
            "90214",
            "90200",
            "90100",
            "91300",
            "90800",
            "90600",
            "90700",
            "90900",
            "91000",
            "91102",
            "91103"
        ],
        "交通配套": [
            "50100",
            "50200",
            "50300",
            "50400",
            "50900",
            "51000"
        ],
        "生活配套": [
            "40600",
            "40100",
            "40900",
            "60101",
            "61300",
            "61800"
        ]
    }
}
```

#### Place搜索V1

请求方式 ：

POST

接口路径：

```
http://IP:Port/zjmap/api/search1 
```

请求示例：

```
localhost:8094/zjmap/api/search1 
```

请求参数：

| 字段名称    | 类型    | 必填 | 说明                                 |
|:-----------|:-------|:----|:-------------------------------------|
| radius     | String | 是   | 搜索半径，单位（m），默认10000m         |
| page_size  | String | 是   | 页大小 不传 默认10条                   |
| categories | String | 是   | 分类ID                               |
| polygon    | String | 是   | 多边形查询 需要传入GeoJson格式的polygon |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": [
        {
            "code": "310115",
            "address": {
                "level": 5,
                "context": [
                    {
                        "code": "310115",
                        "name": "浦东新区",
                        "type": "District"
                    },
                    {
                        "code": "310000",
                        "name": "上海市",
                        "type": "City"
                    },
                    {
                        "code": "310000",
                        "name": "上海市",
                        "type": "Province"
                    },
                    {
                        "code": "310115139",
                        "name": "祝桥镇",
                        "type": "Township"
                    }
                ]
            },
            "originalCategories": [
                {
                    "name": "风景名胜;风景名胜;风景名胜",
                    "id": 110200
                }
            ],
            "name": "九段沙湿地国家级自然保护区",
            "geometry": {
                "coordinates": [
                    121.964808,
                    31.195485
                ],
                "type": "Point"
            },
            "id": "7Txyn1bVGmo",
            "categories": [
                {
                    "name": "风景名胜",
                    "id": 70700
                },
                {
                    "name": "运动休闲",
                    "id": 70000
                }
            ],
            "type": "Scenic"
        }
    ]
}
```


#### 获取数据服务左侧菜单

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/spatial-data/getTag
```

请求示例：

```
localhost:8094/zjmap/spatial-data/getTag
```

请求参数：

响应

| 字段名称 | 类型    | 说明                         |
|:--------|:-------|:-----------------------------|
| code    | String | 状态码                       |
| msg     | String | 状态信息                      |
| data    | Object | 返回数据  themes 主题 unit单位 |

data

| 名称      | 类型          | 描述           |
| --------- | ------------- | -------------- |
| themes    | array<Object> | 主题列表       |
| unit      | array<Object> | 提供单位列表   |
| unitNum   | int           | 提供单位服务数 |
| themesNum | int           | 主题服务数     |

Object

| 名称     | 描述              |
| -------- | ----------------- |
| id       | 字典ID            |
| label    | 字典名称          |
| parentId | 父节点id          |
| num      | 该字典下的服务数  |
| type     | 0 普通类型  1全部 |
| children | 子节点            |



```
{
    "code": 0,
    "msg": "success",
    "data": {
        "unitNum": 0,
        "themesNum": 1
        "themes": [
            {
                "id": 6,
                "parentId": 0,
                "label": "自然资源数据",
                "value": "6",
                "num": null,
                "children": []
            },
            {
                "id": 5,
                "parentId": 0,
                "label": "基础空间数据",
                "value": "5",
                "num": 2,
                "children": []
            }
        ],
        "unit": [
            {
                "id": 7,
                "parentId": 0,
                "label": "建交委",
                "value": "7",
                "num": null,
                "children": []
            },
            {
                "id": 8,
                "parentId": 0,
                "label": "城运中心",
                "value": "8",
                "num": null,
                "children": []
            }
        ]
    }
}
```

#### 获取数据服数据列表

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/spatial-data/getList
```

请求示例：

```
localhost:8094/zjmap/spatial-data/getList
```

请求参数：

| 字段名称   | 类型   | 必填 | 说明                                  |
| ---------- | ------ | ---- | ------------------------------------- |
| pageSize   | String | 是   | 页大小                                |
| currentNum | String | 否   | 当前页                                |
| dictId     | String | 是   | 字典ID                                |
| type       | String | 是   | 页长 1 名称排序 2 时间排序 3 人气排序 |
| keyWord    | String | 否   | 关键字                                |
| dataType   | int    | 否   | 200 主题数据 300 单位数据             |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

Object

| 名称                | 描述                                                  |
| ------------------- | ----------------------------------------------------- |
| respParams          | 响应参数                                              |
| img                 | 图片地址                                              |
| status              | 0 无效 1有效                                          |
| shareType           | 共享方式                                              |
| company             | 公司名称                                              |
| address             | 公司地址                                              |
| contacts            | 联系人                                                |
| contactsPhone       | 联系人手机号                                          |
| contactsEmail       | 联系人邮箱                                            |
| keywords            | 关键字                                                |
| coordinateSystem    | 坐标系统                                              |
| theme               | 主题                                                  |
| serviceType         | 服务类型                                              |
| renewalCycle        | 更新周期                                              |
| createTime          | 创建时间                                              |
| updateTime          | 更新时间                                              |
| popularity          | 人气                                                  |
| serviceDesc         | 服务描述                                              |
| serviceAddr         | 服务地址                                              |
| exampleAddr         | 示例地址                                              |
| name                | 名称                                                  |
| projectionType      | 投影类型                                              |
| dataYear            | 数据年份                                              |
| publishUnit         | 发布单位                                              |
| approvalStatus      | 审批状态 -1 审批拒绝 0 审批中 1审批通过               |
| concern             | 是否关注 0 不关注 1关注                               |
| shareTypeStr        | 共享方式名称                                          |
| themeStr            | 主题名称                                              |
| serviceTypeStr      | 服务类型名称                                          |
| projectionTypeStr   | 投影类型名称                                          |
| publishUnitStr      | 单位名称                                              |
| coordinateSystemStr | 坐标系统名称                                          |
| hasAddCard          | 是否加入购物车 0 未加入购物车 1已加入购物车           |
| applyStatus         | 申请状态 -1 审批拒绝 0 审批中 1审批通过               |
| shareTypeValue      | 受限共享 1000101 无条件共享 1000102  1000100 不予共享 |

```
{
    "code": 0,
    "msg": "success",
    "data": {
        "records": [
            {
                "id": 98,
                "respParams": null,
                "img": "/pdmap/img/dataServer/26240e297ac6460d92fc67f276815579.jpg",
                "status": 1,
                "shareType": 38,
                "company": "hao123",
                "address": null,
                "contacts": null,
                "contactsPhone": null,
                "contactsEmail": null,
                "description": null,
                "keywords": "稳，准，狠",
                "coordinateSystem": 25,
                "theme": 23,
                "serviceType": 14,
                "renewalCycle": null,
                "createTime": "2021-05-27 06:23:32",
                "updateTime": "2021-05-27 06:23:32",
                "popularity": 0,
                "serviceDesc": "这是一个很优秀的门户平台。",
                "serviceAddr": "http://192.168.31.22/www.hao123.com",
                "exampleAddr": null,
                "name": "hao123",
                "projectionType": 30,
                "dataYear": "2025",
                "publishUnit": 33,
                "deleted": 1,
                "approvalStatus": 0,
                "applyStatus": null,
                "concern": null,
                "hasAddCard": null,
                "shareTypeStr": "无条件共享",
                "shareTypeValue": "1000102",
                "themeStr": "经济与社会",
                "serviceTypeStr": "ARCGIS REST Service",
                "projectionTypeStr": "通用横轴墨卡托（UMT）",
                "publishUnitStr": "浦东新区大数据中心",
                "coordinateSystemStr": "CGCS 2000坐标系"
            }
        ],
        "currentNum": 1,
        "totalNum": 1,
        "totalPage": 1
    }
}
```



#### 获取数据服详情

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/spatial-data/getDetail/{id}
```

请求示例：

```
localhost:8094/zjmap/spatial-data/getDetail/{id}
```

请求参数：

响应

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

Object

| 名称                | 描述                                                  |
| ------------------- | ----------------------------------------------------- |
| respParams          | 响应参数                                              |
| img                 | 图片地址                                              |
| status              | 0 无效 1有效                                          |
| shareType           | 共享方式                                              |
| company             | 公司名称                                              |
| address             | 公司地址                                              |
| contacts            | 联系人                                                |
| contactsPhone       | 联系人手机号                                          |
| contactsEmail       | 联系人邮箱                                            |
| keywords            | 关键字                                                |
| coordinateSystem    | 坐标系统                                              |
| theme               | 主题                                                  |
| serviceType         | 服务类型                                              |
| renewalCycle        | 更新周期                                              |
| createTime          | 创建时间                                              |
| updateTime          | 更新时间                                              |
| popularity          | 人气                                                  |
| serviceDesc         | 服务描述                                              |
| serviceAddr         | 服务地址                                              |
| exampleAddr         | 示例地址                                              |
| name                | 名称                                                  |
| projectionType      | 投影类型                                              |
| dataYear            | 数据年份                                              |
| publishUnit         | 发布单位                                              |
| approvalStatus      | 审批状态 -1 审批拒绝 0 审批中 1审批通过               |
| concern             | 是否关注 0 不关注 1关注                               |
| shareTypeStr        | 共享方式名称                                          |
| themeStr            | 主题名称                                              |
| serviceTypeStr      | 服务类型名称                                          |
| projectionTypeStr   | 投影类型名称                                          |
| publishUnitStr      | 单位名称                                              |
| coordinateSystemStr | 坐标系统名称                                          |
| hasAddCard          | 是否加入购物车 0 未加入购物车 1已加入购物车           |
| applyStatus         | 申请状态 -1 审批拒绝 0 审批中 1审批通过               |
| shareTypeValue      | 受限共享 1000101 无条件共享 1000102  1000100 不予共享 |

```
{
    "code": 0,
    "msg": "success",
    "data": {
        "records": [
            {
                "id": 98,
                "respParams": null,
                "img": "/pdmap/img/dataServer/26240e297ac6460d92fc67f276815579.jpg",
                "status": 1,
                "shareType": 38,
                "company": "hao123",
                "address": null,
                "contacts": null,
                "contactsPhone": null,
                "contactsEmail": null,
                "description": null,
                "keywords": "稳，准，狠",
                "coordinateSystem": 25,
                "theme": 23,
                "serviceType": 14,
                "renewalCycle": null,
                "createTime": "2021-05-27 06:23:32",
                "updateTime": "2021-05-27 06:23:32",
                "popularity": 0,
                "serviceDesc": "这是一个很优秀的门户平台。",
                "serviceAddr": "http://192.168.31.22/www.hao123.com",
                "exampleAddr": null,
                "name": "hao123",
                "projectionType": 30,
                "dataYear": "2025",
                "publishUnit": 33,
                "deleted": 1,
                "approvalStatus": 0,
                "applyStatus": null,
                "concern": null,
                "hasAddCard": null,
                "shareTypeStr": "无条件共享",
                "shareTypeValue": "1000102",
                "themeStr": "经济与社会",
                "serviceTypeStr": "ARCGIS REST Service",
                "projectionTypeStr": "通用横轴墨卡托（UMT）",
                "publishUnitStr": "浦东新区大数据中心",
                "coordinateSystemStr": "CGCS 2000坐标系"
            }
        ],
        "currentNum": 1,
        "totalNum": 1,
        "totalPage": 1
    }
}
```



#### 获取功能服务左侧菜单

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/func-service/getTag
```

请求示例：

```
localhost:8094/zjmap/func-service/getTag
```

请求参数：

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

data

| 名称      | 类型          | 描述       |
| --------- | ------------- | ---------- |
| themes    | array<Object> | 主题列表   |
| themesSum | int           | 主题服务数 |

Object

| 名称     | 描述              |
| -------- | ----------------- |
| id       | 字典ID            |
| label    | 字典名称          |
| parentId | 父节点id          |
| num      | 该字典下的服务数  |
| type     | 0 普通类型  1全部 |
| children | 子节点            |



```
{
    "code": 0,
    "msg": "success",
    "data": {
        "themes": [
            {
                "id": null,
                "parentId": null,
                "label": "全部",
                "value": null,
                "type": 1,
                "num": 12,
                "children": null
            },
            {
                "id": 9,
                "parentId": 0,
                "label": "基础能力服务",
                "value": "9",
                "type": 0,
                "num": 12,
                "children": [
                    {
                        "id": 11,
                        "parentId": 9,
                        "label": "基础空间数据",
                        "value": "11",
                        "type": 0,
                        "num": 3,
                        "children": []
                    }
                ]
            },
            {
                "id": 10,
                "parentId": 0,
                "label": "时空分析服务",
                "value": "10",
                "type": 0,
                "num": null,
                "children": []
            }
        ],
        "themesSum": 12
    }
}
```


#### 获取功能服数据列表

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/func-service/getList
```

请求示例：

```
localhost:8094/zjmap/func-service/getList
```

请求参数：

| 字段名称   | 类型   | 必填 | 说明                                  |
| ---------- | ------ | ---- | ------------------------------------- |
| pageSize   | int    | 是   | 页大小                                |
| currentNum | int    | 否   | 当前页                                |
| dictId     | int    | 是   | 字典ID                                |
| type       | int    | 是   | 页长 1 名称排序 2 时间排序 3 人气排序 |
| keyWord    | String | 否   | 关键字                                |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

Object

| 名称             | 描述                                                  |
| ---------------- | ----------------------------------------------------- |
| reqParams        | 请求参数                                              |
| respParams       | 响应参数                                              |
| img              | 图片地址                                              |
| status           | 0 无效 1有效                                          |
| shareType        | 共享方式                                              |
| company          | 公司名称                                              |
| address          | 公司地址                                              |
| contacts         | 联系人                                                |
| contactsPhone    | 联系人手机号                                          |
| contactsEmail    | 联系人邮箱                                            |
| keywords         | 关键字                                                |
| coordinateSystem | 坐标系统                                              |
| theme            | 主题                                                  |
| serviceUrl       | 服务地址                                              |
| serviceDesc      | 服务描述                                              |
| renewalCycle     | 更新周期                                              |
| popularity       | 人气                                                  |
| createTime       | 创建时间                                              |
| updateTime       | 更新时间                                              |
| approvalStatus   | 审批状态 -1 审批拒绝 0 审批中 1审批通过               |
| concern          | 是否关注 0 不关注 1关注                               |
| shareTypeStr     | 共享方式名称                                          |
| themeStr         | 主题类型                                              |
| name             | 服务名称                                              |
| hasAddCard       | 是否加入购物车 0 未加入购物车 1已加入购物车           |
| applyStatus      | 申请状态 -1 审批拒绝 0 审批中 1审批通过               |
| shareTypeValue   | 受限共享 1000101 无条件共享 1000102  1000100 不予共享 |



```
{
    "code": 0,
    "msg": "success",
    "data": {
        "records": [
            {
                "id": 12,
                "reqParams": "1",
                "respParams": "1",
                "img": "1",
                "status": 1,
                "shareType": 1,
                "company": "北京京东世纪贸易有限公司",
                "address": "北京亦庄经济技术开发区科创十一街18号院 ",
                "contacts": "井贤栋",
                "contactsPhone": "15688888888",
                "contactsEmail": "15688888888@.qq.com",
                "keywords": "家电、手机、电脑、母婴、服装",
                "theme": 1,
                "serviceUrl": "1",
                "serviceDesc": "2008年6月，京东商城在2008年初涉足平板电视的销售行列，并于6月将空调、冰箱、电视等大家电产品线逐一扩充完毕。标志着京东公司在建司十周年之际完成了3C产品的全线搭建，成为名副其实的3C网购平台。",
                "renewalCycle": 1,
                "popularity": 11,
                "createTime": "2021-04-19T15:24:04",
                "updateTime": "2021-04-19T15:24:10",
                "concern": null,
                "approvalStatus": null,
                "name": "京东基础服务",
                "shareTypeStr": "居村",
                "themeStr": "居村"
            }
        ],
        "currentNum": 1,
        "totalNum": 1,
        "totalPage": 1
    }
}
```



#### 获取功能服详情

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/func-service/getDetail/{id}
```

请求示例：

```
localhost:8094/zjmap/func-service/getDetail/{id}
```

请求参数：

响应

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

Object

| 名称             | 描述                                        |
| ---------------- | ------------------------------------------- |
| reqParams        | 请求参数                                    |
| respParams       | 响应参数                                    |
| img              | 图片地址                                    |
| status           | 0 无效 1有效                                |
| shareType        | 共享方式 受限共享 100101 无条件共享 100102  |
| company          | 公司名称                                    |
| address          | 公司地址                                    |
| contacts         | 联系人                                      |
| contactsPhone    | 联系人手机号                                |
| contactsEmail    | 联系人邮箱                                  |
| keywords         | 关键字                                      |
| coordinateSystem | 坐标系统                                    |
| theme            | 主题                                        |
| serviceUrl       | 服务地址                                    |
| serviceDesc      | 服务描述                                    |
| renewalCycle     | 更新周期                                    |
| popularity       | 人气                                        |
| createTime       | 创建时间                                    |
| updateTime       | 更新时间                                    |
| approvalStatus   | 审批状态 -1 审批拒绝 0 审批中 1审批通过     |
| concern          | 是否关注 0 不关注 1关注                     |
| shareTypeStr     | 共享方式名称                                |
| themeStr         | 主题类型                                    |
| name             | 服务名称                                    |
| hasAddCard       | 是否加入购物车 0 未加入购物车 1已加入购物车 |
| applyStatus      | 申请状态 -1 审批拒绝 0 审批中 1审批通过     |



#### 扩展信息

请求方式 ：

POST

接口路径：

```
http://IP:Port/zjmap/data-ext/update
```

请求示例：

```
localhost:8094/zjmap/data-ext/update
```

请求参数：

| 字段名称 | 类型    | 必填 | 说明                   |
|:--------|:-------|:----|:------------------------|
| bizId   | int | 是   | 功能服务ID              |
| concern | int | 否   | 关注时必填 0 不关注 1关注   |
| hasAddCard | int | 否 | 加入购物车时必填 0 未加入购物车 1已加入购物车 |
| bizType | String | 是   | 类型 1 数据服务 2功能服务 |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |



#### 获取购物车数量

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/data-ext/getCardCount
```

请求示例：

```
localhost:8094/zjmap/data-ext/getCardCount
```

请求参数：

| 字段名称 | 类型   | 必填 | 说明                      |
| :------- | :----- | :--- | :------------------------ |
| bizType  | String | 是   | 类型 1 数据服务 2功能服务 |

响应

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

#### 

#### 文件上传

请求方式 ：

POST

接口路径：

```
http://IP:Port/zjmap/file/upload
```

请求示例：

```
localhost:8094/zjmap/file/upload
```

请求参数：

| 字段名称 | 类型    | 必填 | 说明            |
|:--------|:-------|:----|:-----------------|
| file    | file   | 是   | 文件            |
| path    | String | 是   | 文件存储路径 test |

响应

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

```
{
    "code": 0,
    "msg": "success",
    "data": "test/src=http___c-ssl.duitang.com_uploads_item_202006_22_20200622123502_wbwth.thumb.400_0.jpg&refer=http___c-ssl.duitang.jpg"
}
```

### 赵恒

#### 数据服务注册

请求方式 ：

POST

接口路径：

```http
http://IP:Port/zjmap/spatial-data/save
```

请求示例：

```http
localhost:8094/zjmap/spatial-data/save
```

请求参数：

| 字段名称          | 类型    | 必填 | 说明        |
|:-----------------|:-------|:----|:------------|
| serviceType      | int    | 是   | 服务类型    |
| serviceAddr      | String | 是   | 服务地址    |
| name             | String | 是   | 服务名称    |
| img              | String | 是   | 图片路径    |
| theme            | int    | 是   | 服务分类    |
| shareType        | int    | 是   | 共享设置    |
| keywords         | String | 否  | 关键字      |
| serviceDesc      | String | 否  | 服务描述    |
| coordinateSystem | int    | 否  | 坐标系统    |
| projectionType   | int    | 否  | 投影类型    |
| dataYear   | String | 是   | 数据年份    |
| publishUnit      | int    | 是   | 数据生产单位名称 |
| contacts | String | 是 | 联系人 |
| contactsPhone | String | 是 | 联系电话 |
| contactsEmail | String | 是 | 联系邮箱 |



请求示例

```json
{
    "serviceType": 20,
    "serviceAddr": "http://192.168.0.100:8080/arcgis/rest/services/ServiceRequest/MapServer",
    "name": "普通地图服务-08",
    "img": "/image/abc.png",
    "theme": 5,
    "shareType": 36,
    "keywords": "arcgis,map,service",
    "serviceDesc": "地图切割",
    "dataYear": 2021,
    "publishUnit": 34,
    "contacts": "高斯林",
    "contactsPhone": "13398764390",
    "contactsEmail": "gaosilin@gmail.com"
}
```


| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：

图片路径需要先上传文件，然后后端会返回一个服务器的图片存储路径，前端获取到路径之后，以字符串的格式，作为img参数的值传到后端；

服务类型、服务分类、共享设置等int类型的属性，需要先通过字典的类型值，如100/200/300，获取到该类型对应的集合，作为下拉列表的值，映射关系如下：

| 代号  | 类型            |
|:-----|:----------------|
| 100  | 应用中心类型     |
| 200  | 主题类别         |
| 300  | 单位类别         |
| 400  | 基础能力服务类别  |
| 500  | 数据服务类型     |
| 600  | 地图服务-服务类型 |
| 700  | 坐标系统         |
| 800  | 投影类型         |
| 900  | 服务发布单位     |
| 1000 | 共享设置         |

获取方式请参考

#### 数据服务删除(根据ID)

请求方式 ：

DELETE

接口路径：

```
http://IP:Port/zjmap/spatial-data/delete/{id}
```

请求示例：

```
localhost:8094/zjmap/spatial-data/delete/32
```

请求参数：

| 字段名称 | 类型 | 说明          |
|:--------|:----|:--------------|
| id      | int | 地图服务数据id |


响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": 1
}
```

说明：无

---



#### 数据服务批量删除

请求方式 ：

POST

接口路径：

```
http://IP:Port/zjmap/spatial-data/delete/ids
```

请求示例：

```
localhost:8094/zjmap/spatial-data/delete/ids
```

请求参数：

| 字段名称 | 类型    | 说明             |
|:--------|:-------|:-----------------|
| ids     | object | 地图服务数据id数组 |

请求示例

```json
{
    "ids": [32, 33]
}
```


响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": "删除了2条"
}
```

说明：无

---

#### 通过类型查询字典表

请求方式 ：

GET

接口路径：

```
http://IP:Port/zjmap/dict/type/{typeNo}
```

请求示例：

```
localhost:8094/zjmap/dict/type/600
```

请求参数：

| 字段名称 | 类型 | 说明           |
|:--------|:----|:---------------|
| typeNo  | int | 类型值，参考说明 |


响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```json
{
    "code": 0,
    "msg": "success",
    "data": [
        {
            "id": 14,
            "parentId": 0,
            "value": "600100",
            "name": "ARCGIS REST Service",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 15,
            "parentId": 0,
            "value": "600101",
            "name": "SuperMap REST Service",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 16,
            "parentId": 0,
            "value": "600102",
            "name": "OGC WMS 服务",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 17,
            "parentId": 0,
            "value": "600103",
            "name": "OGC WFS 服务",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 18,
            "parentId": 0,
            "value": "600104",
            "name": "OGC WMTS 服务",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 19,
            "parentId": 0,
            "value": "600105",
            "name": "OGC WCS 服务",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 20,
            "parentId": 0,
            "value": "600106",
            "name": "OGC WPS 服务",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        },
        {
            "id": 21,
            "parentId": 0,
            "value": "600107",
            "name": "其他服务",
            "type": 600,
            "typeDesc": "地图服务-服务类型",
            "status": 1,
            "num": null,
            "remark": null
        }
    ]
}
```

说明：

| 代号  | 类型            |
|:-----|:----------------|
| 100  | 应用中心类型     |
| 200  | 主题类别         |
| 300  | 单位类别 / 服务发布单位 |
| 400  | 基础能力服务类别  |
| 500  | 数据服务类型     |
| 600  | 地图服务-服务类型 |
| 700  | 坐标系统         |
| 800  | 投影类型         |
| 1000 | 共享设置         |

---

#### 修改数据服务

请求方式 ：

POST

接口路径：

```
http://IP:Port/zjmap/spatial-data/update
```

请求示例：

```
localhost:8094/zjmap/spatial-data/update
```

请求参数：

| 字段名称          | 类型    | 必填 | 说明        |
|:-----------------|:-------|:----|:------------|
| id               | int    | 是   | 服务ID      |
| serviceType      | int    | 是   | 服务类型    |
| serviceAddr      | String | 是   | 服务地址    |
| name             | String | 是   | 服务名称    |
| img              | String | 是   | 图片路径    |
| theme            | int    | 是   | 服务分类    |
| shareType        | int    | 是   | 共享设置    |
| keywords         | String | 是   | 关键字      |
| serviceDesc      | String | 是   | 服务描述    |
| coordinateSystem | int    | 是   | 坐标系统    |
| projectionType   | int    | 是   | 投影类型    |
| dataYear         | int    | 是   | 数据年份    |
| company          | String | 是   | 数据生产单位 |
| publishUnit      | int    | 是   | 服务发布单位 |

请求示例

```json
{
    "id": 32,
    "serviceType": 20,
    "serviceAddr": "http://192.168.0.100:8080/arcgis/rest/services/ServiceRequest/MapServer",
    "name": "普通地图服务-01",
    "img": "/image/abc.png",
    "theme": 5,
    "shareType": 36,
    "keywords": "arcgis,map,service",
    "serviceDesc": "做地图的展示XXXXXXX",
    "coordinateSystem": 26,
    "projectionType": 31,
    "dataYear": 2021,
    "company": "上海图趣信息科技有限公司",
    "publishUnit": 34
}
```


响应参数

| 字段名称 | 类型    | 说明    |
|:--------|:-------|:--------|
| code    | String | 状态码   |
| msg     | String | 状态信息 |
| data    | Object | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无

---

#### 修改共享类型（根据类型value）

请求方式 ：

POST

接口路径：

```http
http://IP:Port/zjmap/spatial-data/shareType/update
```

请求示例：

```http
localhost:8094/zjmap/spatial-data/shareType/update
```

请求参数：

| 字段名称  | 类型   | 必填 | 说明         |
| :-------- | :----- | :--- | :----------- |
| id        | int    | 是   | 服务ID       |
| shareType | String | 是   | 共享类型的值 |

请求示例

```json
{
    "id": 58,
    "shareType": "100102"
}
```

响应参数

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

响应示例

```json
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无

---

#### 修改共享类型（根据类型ID）

请求方式 ：

POST

接口路径：

```http
http://IP:Port/zjmap/spatial-data/shareType/updateById
```

请求示例：

```http
localhost:8094/zjmap/spatial-data/shareType/updateById
```

请求参数：

| 字段名称  | 类型   | 必填 | 说明         |
| :-------- | :----- | :--- | :----------- |
| id        | int    | 是   | 服务ID       |
| shareType | String | 是   | 共享类型的id |

请求示例

```json
{
    "id": 58,
    "shareTypeId": 32
}
```

响应参数

| 字段名称 | 类型   | 说明     |
| :------- | :----- | :------- |
| code     | String | 状态码   |
| msg      | String | 状态信息 |
| data     | Object | 返回数据 |

响应示例

```json
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无

---

#### 工单审核状态数据查询

请求方式 ：

GET

接口路径：

```http
http://IP:Port/zjmap/work-order/getWorkOrderCount
```

请求示例：

```http
localhost:8094/zjmap/work-order/getWorkOrderCount
```

请求参数：

无

请求示例

无

响应参数

| 字段名称      | 类型 | 说明         |
| :------------ | :--- | :----------- |
| allCount      | int  | 总申请数     |
| passedCount   | int  | 审核通过数   |
| rejectedCount | int  | 审核未通过数 |
| waitedCount   | int  | 待审核数     |

响应示例

```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "allCount": 11,
        "passedCount": 9,
        "rejectedCount": 0,
        "waitedCount": 2
    }
}
```

说明：无

---

#### 工单分页查询

请求方式 ：

POST

接口路径：

```http
http://IP:Port/zjmap/work-order/workOrderApproval
```

请求示例：

```http
localhost:8094/zjmap/work-order/workOrderApproval
```

请求参数：

| 字段名称   | 类型   | 必填 | 说明     |
| :--------- | :----- | :--- | :------- |
| startTime  | String | 是   | 起始日期 |
| endTime    | String | 是   | 终止日期 |
| pageSize   | int    | 否   | 页面大小 |
| currentNum | int    | 否   | 页码     |

请求示例

```json
{
    "startTime": "2021-06-01",
    "endTime": "2021-06-03"
}
```

响应参数

| 字段名称       | 类型   | 说明       |
| :------------- | ------ | :--------- |
| serviceType    | String | 服务类型   |
| serviceName    | String | 服务名称   |
| applyDept      | String | 申请部门   |
| applyUser      | String | 申请用户名 |
| applyUserId    | String | 申请用户ID |
| applyRole      | String | 申请角色   |
| applyTime      | String | 申请时间   |
| approvalTime   | String | 审核时间   |
| approvalStatus | String | 审核状态   |
| approvalResult | int    | 审核结果   |

响应示例

```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "records": [
            {
                "serviceType": 100,
                "serviceName": "建筑物图层",
                "applyDept": "全体",
                "applyUser": "francis",
                "applyUserId": "1382968268884545",
                "applyRole": "超级管理员",
                "applyTime": "2021-06-01T06:21:47.994",
                "approvalTime": "2021-06-01T06:21:47.994",
                "approvalStatus": "待定",
                "approvalResult": 1
            },
            {
                "serviceType": 100,
                "serviceName": "浦东新区街镇图层",
                "applyDept": "全体",
                "applyUser": "francis",
                "applyUserId": "1382968268884545",
                "applyRole": "超级管理员",
                "applyTime": "2021-06-01T06:19:59.072",
                "approvalTime": "2021-06-01T06:19:59.072",
                "approvalStatus": "待定",
                "approvalResult": 1
            }
        ],
        "currentNum": 1,
        "totalNum": 2,
        "totalPage": 1
    }
}
```

说明：

起始时间格式：yyyy-MM-dd

审核结果：-1 - 拒绝 / 0 - 审批中 / 1 - 通过

---



### 陈志豪

#### 目录管理新增名称

请求方式 ：

POST

接口路径：

```http
http://IP:Port/zjmap/dict/label/add
```

请求示例：

```http
localhost:8094/zjmap/dict/label/add
```

请求参数：

| 字段名称 | 类型    | 必填 | 说明                                             |
|:--------|:-------|:----|:--------------------------------------------------|
| id      | int    | 否   | 当前目录对应的id，不填则添加一级目录，填则添加其他级目录 |
| type    | int    | 是   | 目录类型，200为主题类型300为单位类型400为数据服务    |
| label   | String | 是   | 目录名称                                          |

请求示例

新增一级目录

```json
{
    "type": 200,
 	"label": "测试目录"  
}
```

新增其他级目录

```json
{
    "id":105,
    "type": 200,
 	"label": "测试目录"  
}
```

响应参数

| 字段名称 | 类型     | 说明    |
|:--------|:--------|:--------|
| code    | Integer | 状态码   |
| msg     | String  | 状态信息 |
| data    | Object  | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无

#### 目录管理修改名称

请求方式 ：

POST

接口路径：

```http
http://IP:Port/zjmap/dict/label/update
```

请求示例：

```http
localhost:8094/zjmap/dict/label/update
```

请求参数：

| 字段名称 | 类型    | 必填 | 说明                             |
|:--------|:-------|:----|:---------------------------------|
| id      | int    | 是   | 当前目录对应的id                  |
| type    | int    | 否   | 目录类型，200为主题类型300为单位类型 |
| label   | String | 是   | 目录名称                         |

请求示例

```json
{
    "id":105,
 	"label": "测试目录"  
}
```

响应参数

| 字段名称 | 类型     | 说明    |
|:--------|:--------|:--------|
| code    | Integer | 状态码   |
| msg     | String  | 状态信息 |
| data    | Object  | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无

#### 目录管理删除目录

请求方式 ：

DELETE

接口路径：

```http
http://IP:Port/zjmap/dict/label/delete/{id}
```

请求示例：

```http
localhost:8094/zjmap/dict/label/delete/{id}
```

请求参数：

| 字段名称 | 类型 | 必填 | 说明                    |
|:--------|:----|:-----|:-----------------------|
| id      | int | 是   | 路径参数，当前目录对应的id |

请求示例

```json
{
    "id":105
}
```

响应参数

| 字段名称 | 类型     | 说明    |
|:--------|:--------|:--------|
| code    | Integer | 状态码   |
| msg     | String  | 状态信息 |
| data    | Object  | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无

#### 目录管理编辑和移动

请求方式 ：

POST

接口路径：

```
http://IP:Port/zjmap/dict/label/change
```

请求示例：

```
localhost:8094/zjmap/dict/label/change
```

请求参数：

| 字段名称   | 类型 | 必填 | 说明                 |
|:----------|:----|:-----|:--------------------|
| currentId | int | 是   | 当前目录或服务对应的id |
| targetId  | int | 是   | 目标id               |

请求示例

form-data

```txt
"currentId":109
"targetId":105
```

响应参数

| 字段名称 | 类型     | 说明    |
|:--------|:--------|:--------|
| code    | Integer | 状态码   |
| msg     | String  | 状态信息 |
| data    | Object  | 返回数据 |

响应示例

```
{
    "code": 0,
    "msg": "success",
    "data": true
}
```

说明：无